<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.picstory.mapper.PicstoryMapper">

	<select id="login" parameterType="com.picstory.model.User"
		resultType="com.picstory.model.User">
		SELECT * FROM TB_USER
		WHERE USER_ID = #{user_id} AND USER_PW
		= #{user_pw}
	</select>

	<!-- 회원가입 -->
	<insert id="memberJoin" parameterType="com.picstory.model.User">
		insert into
		tb_user(user_id, user_pw, user_name, user_nick, user_mail)
		values(#{user_id}, #{user_pw}, #{user_name}, #{user_nick},
		#{user_mail})
	</insert>

	<select id="idDoubleCheck" parameterType="String"
		resultType="String">
		select user_id
		from tb_user
		where user_id = #{user_id}
	</select>

	<!-- 닉네임 중복체크 -->
	<select id="nickDoubleCheck" parameterType="String"
		resultType="String">
		select user_nick
		from tb_user
		where user_nick = #{user_nick}
	</select>

	<!-- 메일 중복체크 -->
	<select id="mailDoubleCheck" parameterType="String"
		resultType="String">
		select user_mail
		from tb_user
		where user_mail = #{user_mail}
	</select>

	<!-- 마이페이지 -->
	<select id="myinfo" parameterType="com.picstory.model.User"
		resultType="com.picstory.model.User">
		SELECT * FROM TB_USER
		WHERE USER_ID = #{user_id}
	</select>

	<!-- 정보수정 -->
	<update id="infoUpdate" parameterType="com.picstory.model.User">
		update tb_user
		set user_pw
		= #{user_pw}, user_name = #{user_name}, user_nick = #{user_nick},
		user_mail = #{user_mail}
		where user_id = #{user_id}
	</update>

	<!-- 이미지 업로드 -->
	<insert id="imageListUpload"
		parameterType="com.picstory.model.Photo">
		INSERT INTO tb_photo (user_num, photo_name, photo_url,
		photo_size)
		VALUES
		(#{user_num}, #{photo_name}, #{photo_url}, #{photo_size})
	</insert>










</mapper>